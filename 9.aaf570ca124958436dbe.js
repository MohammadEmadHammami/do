(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"5VZg":function(e,t,r){"use strict";r.d(t,"a",function(){return S});var n=r("PSD3"),o=r.n(n),i=r("bl9C"),a=r("fXoL"),s=r("EnSQ"),c=r("tyNb"),d=r("OC8m"),b=r("3Pt+"),l=r("ofXK"),u=r("63me"),g=r("EX9E");function p(e,t){if(1&e&&(a.Pb(0,"option",38),a.oc(1),a.Ob()),2&e){const e=t.$implicit;a.dc("value",e.name),a.zb(1),a.pc(e.title)}}const h=function(e){return[e]};function m(e,t){if(1&e&&(a.Pb(0,"button",39),a.Lb(1,"i",40),a.oc(2),a.Ob()),2&e){const e=a.Yb();a.dc("routerLink",a.ec(2,h,e.createLink)),a.zb(2),a.qc(" Create ",e.singleName," ")}}function f(e,t){if(1&e&&a.Lb(0,"app-alert",41),2&e){const e=a.Yb();a.dc("message",e.success)}}function x(e,t){if(1&e&&a.Lb(0,"app-alert",42),2&e){const e=a.Yb();a.dc("message",e.error)}}function y(e,t){if(1&e){const e=a.Qb();a.Pb(0,"a",43),a.Wb("click",function(){a.hc(e);const r=t.$implicit,n=a.Yb();return n.currentPage=r,n.getData()}),a.oc(1),a.Ob()}if(2&e){const e=t.$implicit,r=a.Yb();a.Cb("active",r.currentPage==e),a.zb(1),a.qc(" ",e," ")}}function w(e,t){if(1&e&&(a.Pb(0,"th",44),a.oc(1),a.Ob()),2&e){const e=t.$implicit;a.zb(1),a.qc(" ",e.title," ")}}function v(e,t){if(1&e&&a.Lb(0,"img",59),2&e){const e=a.Yb().$implicit,t=a.Yb().$implicit;a.dc("src",t[e.name],a.jc)}}function P(e,t){if(1&e&&(a.Pb(0,"span",60),a.oc(1),a.Ob()),2&e){const e=a.Yb().$implicit,t=a.Yb().$implicit;a.dc("ngClass",a.ec(2,h,(e.reverseBooleanColors?!t[e.name]:t[e.name])?"bg-green-100":"bg-red-100")),a.zb(1),a.qc(" ",e.values[t[e.name]?1:0]," ")}}function O(e,t){if(1&e&&(a.Pb(0,"span"),a.oc(1),a.Zb(2,"date"),a.Ob()),2&e){const e=a.Yb().$implicit,t=a.Yb().$implicit;a.zb(1),a.qc(" ",a.ac(2,1,t[e.name],"medium")," ")}}function L(e,t){if(1&e&&(a.Pb(0,"div",61),a.oc(1),a.Zb(2,"resumeText"),a.Ob()),2&e){const e=a.Yb().$implicit,t=a.Yb().$implicit;a.zb(1),a.pc(a.ac(2,1,t[e.name],e.maxLength))}}function k(e,t){if(1&e&&(a.Pb(0,"td",53),a.Pb(1,"section",54),a.nc(2,v,1,1,"img",55),a.nc(3,P,2,4,"span",56),a.nc(4,O,3,4,"span",57),a.nc(5,L,3,4,"div",58),a.Ob(),a.Ob()),2&e){const e=t.$implicit;a.zb(1),a.dc("ngSwitch",e.type),a.zb(1),a.dc("ngSwitchCase","avatar"),a.zb(1),a.dc("ngSwitchCase","boolean"),a.zb(1),a.dc("ngSwitchCase","date")}}const C=function(e){return{id:e}};function z(e,t){if(1&e&&(a.Pb(0,"button",62),a.Lb(1,"i",63),a.Ob()),2&e){const e=a.Yb().$implicit,t=a.Yb(2);a.dc("routerLink",a.ec(2,h,t.editLink))("queryParams",a.ec(4,C,e._id))}}function B(e,t){if(1&e){const e=a.Qb();a.Pb(0,"button",64),a.Wb("click",function(){a.hc(e);const t=a.Yb(),r=t.$implicit,n=t.index;return a.Yb(2).deleteRow(r,n)}),a.Lb(1,"i",65),a.Ob()}}function D(e,t){if(1&e&&(a.Pb(0,"tr"),a.nc(1,k,6,4,"td",47),a.Pb(2,"td",48),a.Pb(3,"button",49),a.Lb(4,"i",50),a.Ob(),a.nc(5,z,2,6,"button",51),a.nc(6,B,2,0,"button",52),a.Ob(),a.Ob()),2&e){const e=t.$implicit,r=t.index,n=a.Yb(2);a.Cb("bg-gray-100",r%2),a.zb(1),a.dc("ngForOf",n.headers),a.zb(2),a.dc("routerLink",a.ec(7,h,n.displayLink))("queryParams",a.ec(9,C,e._id)),a.zb(2),a.dc("ngIf",n.showUpdateButton),a.zb(1),a.dc("ngIf",n.showDeleteButton)}}function M(e,t){if(1&e&&(a.Pb(0,"tbody",45),a.nc(1,D,7,11,"tr",46),a.Ob()),2&e){const e=a.Yb();a.zb(1),a.dc("ngForOf",e.data)}}let S=(()=>{class e{constructor(e,t,r){this.dataService=e,this.route=t,this.notification=r,this.showDeleteButton=!0,this.showUpdateButton=!0,this.showCreateButton=!0,this.headers=void 0,this.icon="",this.currentPage=1,this.limit=20,this.searchQuery="",this.sortBy="_id",this.sortDir=1}ngOnInit(){this.getQueryParams(),this.getData()}getQueryParams(){this.route.queryParamMap.subscribe(e=>{const t=e.get("flashMessage");t&&(this.success=t,setTimeout(()=>{this.success=null},2e3))})}canNext(){return this.pages&&this.currentPage<this.pages.length||!1}canPrevious(){return this.pages&&this.currentPage>1||!1}nextPage(){this.canNext()&&(this.currentPage++,this.getData())}previousPage(){this.canPrevious()&&(this.currentPage--,this.getData())}getData(){this.error=void 0,this.dataService.sendGetRequest(this.retrieveURL,{sortBy:this.sortBy,sortDir:this.sortDir,page:this.currentPage,limit:this.limit,searchQuery:this.searchQuery}).subscribe(e=>{this.data=e.data.docs,this.headers.forEach(e=>{"avatar"==e.type&&this.data.forEach(t=>{t[e.name]=i.a.DOMAIN_URL+t[e.name]})}),this.pages=[...new Array(e.data.totalPages).keys()].map(e=>e+1)},e=>{console.log(e),this.error=e.error})}showDeleteConf(){return o.a.fire({title:"Are you sure?",text:`Do you really want to delete this ${this.singleName} !`,icon:"warning",showCancelButton:!0,confirmButtonColor:"red",confirmButtonText:"Yes, delete it!"})}deleteRow(e,t){this.showDeleteConf().then(r=>{if(r.isConfirmed){const r=this.deleteURL.replace(/:id/g,e._id);this.dataService.sendDeleteRequest(r).subscribe(e=>{console.log(e),this.data.splice(t,1),this.showSuccessMessage(e.message)},e=>{console.log(e),this.showErrorMessage(e.error)})}})}showErrorMessage(e){this.notification.showSuccess(e,"Error")}showSuccessMessage(e){this.notification.showSuccess(e,"Success")}sortableHeaders(){return this.headers.filter(e=>0!=e.sort)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(s.a),a.Kb(c.a),a.Kb(d.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["app-table"]],inputs:{singleName:"singleName",plurarName:"plurarName",retrieveURL:"retrieveURL",deleteURL:"deleteURL",displayLink:"displayLink",editLink:"editLink",createLink:"createLink",showDeleteButton:"showDeleteButton",showUpdateButton:"showUpdateButton",showCreateButton:"showCreateButton",headers:"headers",icon:"icon"},decls:62,vars:20,consts:[[1,"mx-4"],[1,"my-3"],[1,"text-3xl","uppercase","my-2"],[1,"xl:grid","xl:grid-flow-col","gap-2","xl:flex","items-center","justify-end"],[1,"flex","items-center","gap-1","col-span-full"],[1,"nowrap"],["name","limit","placeholder","per page","id","sorter",1,"rounded-lg","flex-grow",3,"ngModel","change","ngModelChange"],["value","10"],["value","20"],["value","50"],[1,"flex","items-center","gap-1","mt-2","xl:mt-0"],["name","sortBy","name","","placeholder","sort by","id","sorter",1,"rounded-lg","flex-grow","lg:mx-1","uppercase",3,"ngModel","ngModelChange","change"],["class","uppercase",3,"value",4,"ngFor","ngForOf"],["name","sortDir",1,"rounded-lg","mt-1",3,"ngModel","ngModelChange","change"],["value","1"],["value","-1"],["name","searchQuery","type","text","placeholder","search",1,"rounded-lg","flex-grow",3,"ngModel","keyup.enter","ngModelChange"],[1,"bg-transparent","border-2","nowrap","border-indigo-300","rounded-lg","p-2","px-4","hover:bg-indigo-400","hover:text-white",3,"click"],[1,"fas","fa-search"],["class","bg-transparent border-2 nowrap border-indigo-300 p-2 px-3 rounded-lg hover:bg-indigo-400 hover:text-white flex-grow",3,"routerLink",4,"ngIf"],[1,"bg-transparent","border-2","nowrap","border-indigo-300","p-2","px-3","rounded-lg","hover:bg-indigo-400","hover:text-white","flex-grow",3,"click"],[1,"fas","fa-sync-alt","mx-1"],["title","Success","type","success",3,"message",4,"ngIf"],["title","Error","type","danger",3,"message",4,"ngIf"],[1,"mt-3"],[1,"flex","justify-between"],[1,"bg-transparent","text-blue-500","p-2","border-2","border-gray-300","hover:bg-blue-100",3,"disabled","click"],[1,"fas","fa-chevron-left","mx-1"],["aria-label","Pagination",1,"relative","z-0","inline-flex","rounded-md","shadow-sm"],["class","bg-white cursor-pointer border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center py-2 px-4 border text-sm font-medium",3,"active","click",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-right","mx-1"],[1,"w-full","overflow-x-auto","mt-4"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-black"],["scope","col","class","py-3 px-2 text-center text-xs font-medium  text-white uppercase tracking-wider",4,"ngFor","ngForOf"],["scope","col",1,"relative","px-6","py-3"],[1,"sr-only"],["class","bg-white divide-y divide-gray-200",4,"ngIf"],[1,"uppercase",3,"value"],[1,"bg-transparent","border-2","nowrap","border-indigo-300","p-2","px-3","rounded-lg","hover:bg-indigo-400","hover:text-white","flex-grow",3,"routerLink"],[1,"fas","fa-plus","mx-1"],["title","Success","type","success",3,"message"],["title","Error","type","danger",3,"message"],[1,"bg-white","cursor-pointer","border-gray-300","text-gray-500","hover:bg-gray-50","relative","inline-flex","items-center","py-2","px-4","border","text-sm","font-medium",3,"click"],["scope","col",1,"py-3","px-2","text-center","text-xs","font-medium","text-white","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[3,"bg-gray-100",4,"ngFor","ngForOf"],["class","py-4 whitespace-nowrap text-center px-2 border-2 border-gray-200",4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap","text-right"],[1,"border-2","border-indigo-200","py-2","px-3","rounded-md","hover:bg-indigo-200","mx-1","text-xs",3,"routerLink","queryParams"],[1,"fas","fa-eye"],["class","border-2 border-gray-200 py-2 px-3 rounded-md hover:bg-gray-400 hover:text-white mx-1 text-xs",3,"routerLink","queryParams",4,"ngIf"],["class","border-2 border-red-200 py-2 px-3 rounded-md hover:bg-red-400 hover:text-white mx-1 text-xs",3,"click",4,"ngIf"],[1,"py-4","whitespace-nowrap","text-center","px-2","border-2","border-gray-200"],[3,"ngSwitch"],["class","h-10 w-10 rounded-full mx-auto ring-2 ring-gray-300","alt","",3,"src",4,"ngSwitchCase"],["class","p-2 px-3 inline-flex cursor-pointer text-sm leading-5 font-semibold rounded-full",3,"ngClass",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","text-sm text-gray-900",4,"ngSwitchDefault"],["alt","",1,"h-10","w-10","rounded-full","mx-auto","ring-2","ring-gray-300",3,"src"],[1,"p-2","px-3","inline-flex","cursor-pointer","text-sm","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"text-sm","text-gray-900"],[1,"border-2","border-gray-200","py-2","px-3","rounded-md","hover:bg-gray-400","hover:text-white","mx-1","text-xs",3,"routerLink","queryParams"],[1,"fas","fa-edit"],[1,"border-2","border-red-200","py-2","px-3","rounded-md","hover:bg-red-400","hover:text-white","mx-1","text-xs",3,"click"],[1,"fas","fa-trash-alt"]],template:function(e,t){1&e&&(a.Pb(0,"div",0),a.Pb(1,"div",1),a.Pb(2,"span",2),a.Lb(3,"i"),a.oc(4),a.Ob(),a.Lb(5,"hr"),a.Ob(),a.Pb(6,"div",3),a.Pb(7,"div",4),a.Pb(8,"span",5),a.oc(9,"Per page"),a.Ob(),a.Pb(10,"select",6),a.Wb("change",function(){return t.getData()})("ngModelChange",function(e){return t.limit=e}),a.Pb(11,"option",7),a.oc(12,"10"),a.Ob(),a.Pb(13,"option",8),a.oc(14,"20"),a.Ob(),a.Pb(15,"option",9),a.oc(16,"50"),a.Ob(),a.Pb(17,"option",8),a.oc(18,"100"),a.Ob(),a.Pb(19,"option",8),a.oc(20,"500"),a.Ob(),a.Ob(),a.Ob(),a.Pb(21,"div",10),a.Pb(22,"span",5),a.oc(23,"Sort by"),a.Ob(),a.Pb(24,"select",11),a.Wb("ngModelChange",function(e){return t.sortBy=e})("change",function(){return t.getData()}),a.nc(25,p,2,2,"option",12),a.Ob(),a.Pb(26,"select",13),a.Wb("ngModelChange",function(e){return t.sortDir=e})("change",function(){return t.getData()}),a.Pb(27,"option",14),a.oc(28,"ASC"),a.Ob(),a.Pb(29,"option",15),a.oc(30,"DESC"),a.Ob(),a.Ob(),a.Ob(),a.Pb(31,"div",10),a.Pb(32,"input",16),a.Wb("keyup.enter",function(){return t.getData()})("ngModelChange",function(e){return t.searchQuery=e}),a.Ob(),a.Pb(33,"button",17),a.Wb("click",function(){return t.getData()}),a.Lb(34,"i",18),a.Ob(),a.Ob(),a.Pb(35,"div",10),a.nc(36,m,3,4,"button",19),a.Pb(37,"button",20),a.Wb("click",function(){return t.getData()}),a.Lb(38,"i",21),a.oc(39," Refresh "),a.Ob(),a.Ob(),a.Ob(),a.Pb(40,"div",1),a.nc(41,f,1,1,"app-alert",22),a.nc(42,x,1,1,"app-alert",23),a.Ob(),a.Pb(43,"div",24),a.Pb(44,"div",25),a.Pb(45,"button",26),a.Wb("click",function(){return t.previousPage()}),a.Lb(46,"i",27),a.oc(47," Previous "),a.Ob(),a.Pb(48,"nav",28),a.nc(49,y,2,3,"a",29),a.Ob(),a.Pb(50,"button",26),a.Wb("click",function(){return t.nextPage()}),a.oc(51," Next "),a.Lb(52,"i",30),a.Ob(),a.Ob(),a.Pb(53,"div",31),a.Pb(54,"table",32),a.Pb(55,"thead",33),a.Pb(56,"tr"),a.nc(57,w,2,1,"th",34),a.Pb(58,"th",35),a.Pb(59,"span",36),a.oc(60,"Edit"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.nc(61,M,2,1,"tbody",37),a.Ob(),a.Ob(),a.Ob(),a.Ob()),2&e&&(a.zb(3),a.Bb(t.icon+" mx-2"),a.zb(1),a.qc("List of ",t.plurarName,""),a.zb(6),a.dc("ngModel",t.limit),a.zb(14),a.dc("ngModel",t.sortBy),a.zb(1),a.dc("ngForOf",t.sortableHeaders()),a.zb(1),a.dc("ngModel",t.sortDir),a.zb(6),a.dc("ngModel",t.searchQuery),a.zb(4),a.dc("ngIf",t.showCreateButton),a.zb(5),a.dc("ngIf",t.success),a.zb(1),a.dc("ngIf",t.error),a.zb(3),a.Cb("disabled",!t.canPrevious()),a.dc("disabled",!t.canPrevious()),a.zb(4),a.dc("ngForOf",t.pages),a.zb(1),a.Cb("disabled",!t.canNext()),a.dc("disabled",!t.canNext()),a.zb(7),a.dc("ngForOf",t.headers),a.zb(4),a.dc("ngIf",t.data&&t.data.length))},directives:[b.i,b.d,b.g,b.h,b.k,l.j,b.b,l.k,c.c,u.a,l.l,l.m,l.n,l.i],pipes:[l.d,g.a],styles:[".avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%}td[_ngcontent-%COMP%]{vertical-align:middle}.disabled[_ngcontent-%COMP%]{cursor:none}.disabled[_ngcontent-%COMP%]:hover{background-color:initial}.disabled[_ngcontent-%COMP%]{--tw-border-opacity:1;border-color:rgba(209,213,219,var(--tw-border-opacity));--tw-text-opacity:1;color:rgba(209,213,219,var(--tw-text-opacity))}.active[_ngcontent-%COMP%]{--tw-bg-opacity:1;background-color:rgba(238,242,255,var(--tw-bg-opacity));--tw-border-opacity:1;border-color:rgba(99,102,241,var(--tw-border-opacity));--tw-text-opacity:1;color:rgba(79,70,229,var(--tw-text-opacity))}"]}),e})()},"z2+L":function(e,t,r){"use strict";r.r(t),r.d(t,"PostModule",function(){return u});var n=r("ofXK"),o=r("tyNb"),i=r("fXoL"),a=r("vWH4"),s=r("5VZg");let c=(()=>{class e{constructor(e){this.route=e,this.headers=[{name:"_id",title:"id"},{name:"text",title:"content"},{name:"user",title:"creator",link:"/dashboard/users/display?id=:user"},{name:"channel",title:"channel",link:"/dashboard/channels/display?id=:channel"}],this.list={headers:[{name:"_id",title:"id"},{name:"message",title:"message",maxLength:500},{name:"createdAt",title:"date",type:"date"}],buttons:[{icon:"fas fa-broom",color:"indigo",name:"clear reports",request:{url:"channel/:id/clearReports",methode:"post"}}],rowsButtons:[{icon:"fas fa-eye",name:"",color:"indigo",link:"/dashboard/reports/display?id=:_id"}],icon:"fas fa-exclamation-triangle",title:"list of reports",name:"reports"},this.buttons=[{name:"Delete",icon:"fas fa-trash-alt",color:"red",request:{url:"channel/post/:id",methode:"delete",redirectURL:"/dashboard/posts/list"},confirmation:{title:"Delete Post",text:"Are you sure you want to delete this post",confirmButtonText:"Yes",confirmButtonColor:"red",showCancelButton:!0,cancelButtonText:"No",icon:"warning"}}],this.commentHeaders=[{name:"_id",title:"id"},{name:"text",title:"content",maxLength:40},{name:"post",title:"post"},{name:"user",title:"user"},{name:"reports",title:"reports"}]}ngOnInit(){this.getPostId()}getPostId(){this.route.queryParamMap.subscribe(e=>{this.postId=e.get("id")})}}return e.\u0275fac=function(t){return new(t||e)(i.Kb(o.a))},e.\u0275cmp=i.Eb({type:e,selectors:[["app-display-post"]],decls:3,vars:7,consts:[["singleName","post","retrieveURL","channel/post/:id/dash","deleteURL","post/:id","redirectLink","/dashboard/posts/list","editLink","/dashboard/posts/form/edit","icon","fas fa-clone",3,"headers","buttons","list"],["id","before-reports"],["plurarName","comments","singleName","comment","deleteURL","channel/comment/:id","displayLink","/dashboard/comments/display","icon","fas fa-comments",3,"headers","retrieveURL","showCreateButton","showUpdateButton"]],template:function(e,t){1&e&&(i.Pb(0,"app-display",0),i.Pb(1,"div",1),i.Lb(2,"app-table",2),i.Ob(),i.Ob()),2&e&&(i.dc("headers",t.headers)("buttons",t.buttons)("list",t.list),i.zb(2),i.dc("headers",t.commentHeaders)("retrieveURL","channel/post/"+t.postId+"/comments")("showCreateButton",!1)("showUpdateButton",!1))},directives:[a.a,s.a],styles:[""]}),e})();const d=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Eb({type:e,selectors:[["app-post"]],decls:1,vars:0,template:function(e,t){1&e&&i.Lb(0,"router-outlet")},directives:[o.g],styles:[""]}),e})(),children:[{path:"display",component:c}]}];let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Ib({type:e}),e.\u0275inj=i.Hb({imports:[[o.f.forChild(d)],o.f]}),e})();var l=r("bGsp");let u=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Ib({type:e}),e.\u0275inj=i.Hb({imports:[[n.b,b,l.a]]}),e})()}}]);