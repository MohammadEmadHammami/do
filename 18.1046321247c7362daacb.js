(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{pGTo:function(e,t,s){"use strict";s.r(t),s.d(t,"UserModule",function(){return N});var a=s("bGsp"),n=s("ofXK"),i=s("Yyql"),r=s("fXoL"),o=s("vWH4");let l=(()=>{class e{constructor(){this.headers=[{name:"avatar",title:"",type:"avatar"},{name:"_id",title:"id"},{name:"firstName",title:"first name",width:"1/2"},{name:"lastName",title:"last name",width:"1/2"},{name:"email",title:"E-mail",width:"1/2"},{name:"phone",title:"phone number",width:"1/2",default:"No Phone Number"},{name:"role",title:"role",width:"1/2"},{name:"enabled",title:"status",type:"boolean",width:"1/2",values:["Disabled","Enabled"]},{name:"gender",title:"gender",width:"1/2"},{name:"birthDate",title:"birth date",type:"date",width:"1/2"},{name:"country",title:"country",width:"1/2"},{name:"city",title:"city",width:"1/2"},{name:"school",title:"school",width:"1/2",default:"No School"},{name:"education",title:"education",width:"1/2",default:"No Education"},{name:"profession",title:"profession",default:"No Profession"},{name:"interests",title:"interests",type:"tags",default:"No Interests"},{name:"banned",title:"banned",type:"boolean",values:["No","Yes"]},{name:"bannedReason",title:"banned reason",type:"text",default:"Not Banned"}],this.list={headers:[{name:"_id",title:"id"},{name:"message",title:"message",maxLength:500},{name:"createdAt",title:"date",type:"date"}],buttons:[{icon:"fas fa-broom",color:"indigo",name:"clear reports",request:{url:"user/:id/clearReports",methode:"post"}}],rowsButtons:[{icon:"fas fa-eye",name:"",color:"indigo",link:"/dashboard/reports/display?id=:_id"}],icon:"fas fa-exclamation-triangle",title:"list of reports",name:"reports"},this.buttons=[{name:"Block",icon:"fas fa-ban",color:"red",request:{url:"user/:id/ban",methode:"post"},confirmation:{title:"Block user",text:"What is the reason of blocking this user ?",input:"text",inputAttributes:{name:"message"},confirmButtonText:"Confirm",confirmButtonColor:"red"},condition:"!banned"},{name:"Unblock",icon:"far fa-circle",color:"green",request:{url:"user/:id/unban",methode:"post"},condition:"banned"},{name:"Edit",icon:"fas fa-edit",color:"gray",link:"/dashboard/users/form/edit?id=:id"},{name:"Delete",icon:"fas fa-trash-alt",color:"red",confirmation:{title:"Delete user",text:"Are you sure you want to delete this user",confirmButtonText:"Yes",confirmButtonColor:"red",showCancelButton:!0,cancelButtonText:"No",icon:"warning"},request:{url:"user/:id",methode:"delete",redirectURL:"/dashboard/users/list"}}]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Eb({type:e,selectors:[["app-display-user"]],decls:1,vars:3,consts:[["singleName","user","retrieveURL","user/dash/:id","deleteURL","user/:id","redirectLink","/dashboard/users/list","editLink","/dashboard/users/form/edit","icon","fas fa-user",3,"headers","buttons","list"]],template:function(e,t){1&e&&r.Lb(0,"app-display",0),2&e&&r.dc("headers",t.headers)("buttons",t.buttons)("list",t.list)},directives:[o.a],styles:[""]}),e})();var d=s("pbSD"),u=s("ENac");let c=(()=>{class e{constructor(e){this.jsonService=e,this.countries={},this.professions=[],this.interests=[],this.educations=[],this.headers=[]}ngOnInit(){this.getJsonData()}getJsonData(){this.countries=JSON.parse(localStorage.getItem("countries")),this.professions=JSON.parse(localStorage.getItem("professions")),this.educations=JSON.parse(localStorage.getItem("educations")),this.interests=JSON.parse(localStorage.getItem("interests")),this.initializeHeaders()}initializeHeaders(){this.headers=[{name:"avatar",title:"",type:"avatar",value:""},{name:"id",title:"#",hidden:!0,value:""},{name:"firstName",title:"first name",type:"text",width:"1/2",value:""},{name:"lastName",title:"last name",type:"text",width:"1/2",value:""},{name:"email",title:"E-mail",type:"email",value:""},{name:"password",title:"Password",width:"1/2",type:"password",value:""},{name:"password_confirmation",title:"Password confirmation",width:"1/2",type:"password",value:""},{name:"role",title:"role",type:"select",options:["USER","ADMIN","SUPER ADMIN"],width:"1/3",value:"USER"},{name:"enabled",title:"status",type:"boolean",width:"1/3",options:["Disabled","Enabled"],value:!0},{name:"gender",title:"gender",type:"select",options:["male","female"],width:"1/3",value:"male"},{name:"phone",title:"phone",type:"text",value:""},{name:"country",title:"country",type:"select",width:"1/2",options:Object.keys(this.countries),value:Object.keys(this.countries)[0]},{name:"city",title:"city",type:"select",width:"1/2",options:this.countries[Object.keys(this.countries)[0]],value:this.countries[Object.keys(this.countries)[0]][0]},{name:"birthDate",title:"birth date",type:"date",value:new Date},{name:"school",title:"school",type:"text",width:"1/2",value:""},{name:"education",title:"education",type:"select",options:this.educations,width:"1/2",value:this.educations[0]},{name:"profession",title:"profession",type:"select",options:this.professions,value:this.professions[0]},{name:"interests",title:"interests",type:"select-tags",options:this.interests,value:[]}]}changeHeaders(e){this.headers=e}fieldChanged(e){"country"==e.name&&(this.headers=this.headers.map(t=>("city"==t.name&&(t.options=this.countries[e.value],t.value=this.countries[e.value][0]),t)),console.log(this.headers))}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(d.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-user-form"]],decls:1,vars:3,consts:[["icon","fas fa-user","redirectLink","/dashboard/users/list","retrieveURL","user/dash/:id","storeURL","user/","updateURL","user/dash/:id",3,"headers","plurarName","singleName","headersChanged","onChange"]],template:function(e,t){1&e&&(r.Pb(0,"app-form",0),r.Wb("headersChanged",function(e){return t.changeHeaders(e)})("onChange",function(e){return t.fieldChanged(e)}),r.Ob()),2&e&&r.dc("headers",t.headers)("plurarName","users")("singleName","user")},directives:[u.a],styles:[""]}),e})();var h=s("vmXk"),m=s("EnSQ"),p=s("tk/3");let f=(()=>{class e extends m.a{constructor(e){super(e)}allUsers(e={}){return this.sendGetRequest("user/all",e)}}return e.\u0275fac=function(t){return new(t||e)(r.Tb(p.a))},e.\u0275prov=r.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var b=s("5VZg");let y=(()=>{class e{constructor(e){this.userService=e,this.headers=[{name:"avatar",title:"",type:"avatar",sort:!1,align:"center"},{name:"_id",title:"id"},{name:"firstName",title:"first name"},{name:"lastName",title:"last name"},{name:"email",title:"E-mail"},{name:"role",title:"role"},{name:"enabled",title:"status",type:"boolean",values:["disabled","enabled"]},{name:"reports",title:"reports",align:"center"}]}ngOnInit(){this.getUser()}getUser(){this.user=(new h.a).initialize(JSON.parse(localStorage.getItem("user")))}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(f))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-list"]],decls:2,vars:6,consts:[[1,"container-fluid"],["deleteURL","user/:id","retrieveURL","user/all","displayLink","/dashboard/users/display","editLink","/dashboard/users/form/edit","createLink","/dashboard/users/form/create","icon","fas fa-users",3,"headers","plurarName","singleName","showDeleteButton","showUpdateButton","showCreateButton"]],template:function(e,t){1&e&&(r.Pb(0,"div",0),r.Lb(1,"app-table",1),r.Ob()),2&e&&(r.zb(1),r.dc("headers",t.headers)("plurarName","users")("singleName","user")("showDeleteButton",t.user&&"SUPER ADMIN"==t.user.role)("showUpdateButton",t.user&&"SUPER ADMIN"==t.user.role)("showCreateButton",t.user&&"SUPER ADMIN"==t.user.role))},directives:[b.a],styles:[""]}),e})();var v=s("tyNb");const w=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Eb({type:e,selectors:[["app-user"]],decls:1,vars:0,template:function(e,t){1&e&&r.Lb(0,"router-outlet")},directives:[v.g],styles:[""]}),e})(),children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:y},{path:"form/:type",component:c,canActivate:[i.a]},{path:"display",component:l}]}];let g=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({imports:[[v.f.forChild(w)],v.f]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({imports:[[a.a,n.b,g]]}),e})()}}]);