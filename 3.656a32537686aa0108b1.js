(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"5VZg":function(e,t,n){"use strict";n.d(t,"a",function(){return $});var i=n("PSD3"),r=n.n(i),o=n("bl9C"),a=n("fXoL"),c=n("EnSQ"),s=n("tyNb"),b=n("OC8m"),d=n("3Pt+"),l=n("ofXK"),g=n("63me"),u=n("EX9E");function h(e,t){if(1&e&&(a.Pb(0,"option",38),a.oc(1),a.Ob()),2&e){const e=t.$implicit;a.dc("value",e.name),a.zb(1),a.pc(e.title)}}const p=function(e){return[e]};function f(e,t){if(1&e&&(a.Pb(0,"button",39),a.Lb(1,"i",40),a.oc(2),a.Ob()),2&e){const e=a.Yb();a.dc("routerLink",a.ec(2,p,e.createLink)),a.zb(2),a.qc(" Create ",e.singleName," ")}}function m(e,t){if(1&e&&a.Lb(0,"app-alert",41),2&e){const e=a.Yb();a.dc("message",e.success)}}function x(e,t){if(1&e&&a.Lb(0,"app-alert",42),2&e){const e=a.Yb();a.dc("message",e.error)}}function v(e,t){if(1&e){const e=a.Qb();a.Pb(0,"a",43),a.Wb("click",function(){a.hc(e);const n=t.$implicit,i=a.Yb();return i.currentPage=n,i.getData()}),a.oc(1),a.Ob()}if(2&e){const e=t.$implicit,n=a.Yb();a.Cb("active",n.currentPage==e),a.zb(1),a.qc(" ",e," ")}}function y(e,t){if(1&e&&(a.Pb(0,"th",44),a.oc(1),a.Ob()),2&e){const e=t.$implicit;a.zb(1),a.qc(" ",e.title," ")}}function w(e,t){if(1&e&&a.Lb(0,"img",59),2&e){const e=a.Yb().$implicit,t=a.Yb().$implicit;a.dc("src",t[e.name],a.jc)}}function P(e,t){if(1&e&&(a.Pb(0,"span",60),a.oc(1),a.Ob()),2&e){const e=a.Yb().$implicit,t=a.Yb().$implicit;a.dc("ngClass",a.ec(2,p,(e.reverseBooleanColors?!t[e.name]:t[e.name])?"bg-green-100":"bg-red-100")),a.zb(1),a.qc(" ",e.values[t[e.name]?1:0]," ")}}function O(e,t){if(1&e&&(a.Pb(0,"span"),a.oc(1),a.Zb(2,"date"),a.Ob()),2&e){const e=a.Yb().$implicit,t=a.Yb().$implicit;a.zb(1),a.qc(" ",a.ac(2,1,t[e.name],"medium")," ")}}function C(e,t){if(1&e&&(a.Pb(0,"div",61),a.oc(1),a.Zb(2,"resumeText"),a.Ob()),2&e){const e=a.Yb().$implicit,t=a.Yb().$implicit;a.zb(1),a.pc(a.ac(2,1,t[e.name],e.maxLength))}}function k(e,t){if(1&e&&(a.Pb(0,"td",53),a.Pb(1,"section",54),a.nc(2,w,1,1,"img",55),a.nc(3,P,2,4,"span",56),a.nc(4,O,3,4,"span",57),a.nc(5,C,3,4,"div",58),a.Ob(),a.Ob()),2&e){const e=t.$implicit;a.zb(1),a.dc("ngSwitch",e.type),a.zb(1),a.dc("ngSwitchCase","avatar"),a.zb(1),a.dc("ngSwitchCase","boolean"),a.zb(1),a.dc("ngSwitchCase","date")}}const z=function(e){return{id:e}};function L(e,t){if(1&e&&(a.Pb(0,"button",62),a.Lb(1,"i",63),a.Ob()),2&e){const e=a.Yb().$implicit,t=a.Yb(2);a.dc("routerLink",a.ec(2,p,t.editLink))("queryParams",a.ec(4,z,e._id))}}function Y(e,t){if(1&e){const e=a.Qb();a.Pb(0,"button",64),a.Wb("click",function(){a.hc(e);const t=a.Yb(),n=t.$implicit,i=t.index;return a.Yb(2).deleteRow(n,i)}),a.Lb(1,"i",65),a.Ob()}}function M(e,t){if(1&e&&(a.Pb(0,"tr"),a.nc(1,k,6,4,"td",47),a.Pb(2,"td",48),a.Pb(3,"button",49),a.Lb(4,"i",50),a.Ob(),a.nc(5,L,2,6,"button",51),a.nc(6,Y,2,0,"button",52),a.Ob(),a.Ob()),2&e){const e=t.$implicit,n=t.index,i=a.Yb(2);a.Cb("bg-gray-100",n%2),a.zb(1),a.dc("ngForOf",i.headers),a.zb(2),a.dc("routerLink",a.ec(7,p,i.displayLink))("queryParams",a.ec(9,z,e._id)),a.zb(2),a.dc("ngIf",i.showUpdateButton),a.zb(1),a.dc("ngIf",i.showDeleteButton)}}function I(e,t){if(1&e&&(a.Pb(0,"tbody",45),a.nc(1,M,7,11,"tr",46),a.Ob()),2&e){const e=a.Yb();a.zb(1),a.dc("ngForOf",e.data)}}let $=(()=>{class e{constructor(e,t,n){this.dataService=e,this.route=t,this.notification=n,this.showDeleteButton=!0,this.showUpdateButton=!0,this.showCreateButton=!0,this.headers=void 0,this.icon="",this.currentPage=1,this.limit=20,this.searchQuery="",this.sortBy="_id",this.sortDir=1}ngOnInit(){this.getQueryParams(),this.getData()}getQueryParams(){this.route.queryParamMap.subscribe(e=>{const t=e.get("flashMessage");t&&(this.success=t,setTimeout(()=>{this.success=null},2e3))})}canNext(){return this.pages&&this.currentPage<this.pages.length||!1}canPrevious(){return this.pages&&this.currentPage>1||!1}nextPage(){this.canNext()&&(this.currentPage++,this.getData())}previousPage(){this.canPrevious()&&(this.currentPage--,this.getData())}getData(){this.error=void 0,this.dataService.sendGetRequest(this.retrieveURL,{sortBy:this.sortBy,sortDir:this.sortDir,page:this.currentPage,limit:this.limit,searchQuery:this.searchQuery}).subscribe(e=>{this.data=e.data.docs,this.headers.forEach(e=>{"avatar"==e.type&&this.data.forEach(t=>{t[e.name]=o.a.DOMAIN_URL+t[e.name]})}),this.pages=[...new Array(e.data.totalPages).keys()].map(e=>e+1)},e=>{console.log(e),this.error=e.error})}showDeleteConf(){return r.a.fire({title:"Are you sure?",text:`Do you really want to delete this ${this.singleName} !`,icon:"warning",showCancelButton:!0,confirmButtonColor:"red",confirmButtonText:"Yes, delete it!"})}deleteRow(e,t){this.showDeleteConf().then(n=>{if(n.isConfirmed){const n=this.deleteURL.replace(/:id/g,e._id);this.dataService.sendDeleteRequest(n).subscribe(e=>{console.log(e),this.data.splice(t,1),this.showSuccessMessage(e.message)},e=>{console.log(e),this.showErrorMessage(e.error)})}})}showErrorMessage(e){this.notification.showSuccess(e,"Error")}showSuccessMessage(e){this.notification.showSuccess(e,"Success")}sortableHeaders(){return this.headers.filter(e=>0!=e.sort)}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(c.a),a.Kb(s.a),a.Kb(b.a))},e.\u0275cmp=a.Eb({type:e,selectors:[["app-table"]],inputs:{singleName:"singleName",plurarName:"plurarName",retrieveURL:"retrieveURL",deleteURL:"deleteURL",displayLink:"displayLink",editLink:"editLink",createLink:"createLink",showDeleteButton:"showDeleteButton",showUpdateButton:"showUpdateButton",showCreateButton:"showCreateButton",headers:"headers",icon:"icon"},decls:62,vars:20,consts:[[1,"mx-4"],[1,"my-3"],[1,"text-3xl","uppercase","my-2"],[1,"xl:grid","xl:grid-flow-col","gap-2","xl:flex","items-center","justify-end"],[1,"flex","items-center","gap-1","col-span-full"],[1,"nowrap"],["name","limit","placeholder","per page","id","sorter",1,"rounded-lg","flex-grow",3,"ngModel","change","ngModelChange"],["value","10"],["value","20"],["value","50"],[1,"flex","items-center","gap-1","mt-2","xl:mt-0"],["name","sortBy","name","","placeholder","sort by","id","sorter",1,"rounded-lg","flex-grow","lg:mx-1","uppercase",3,"ngModel","ngModelChange","change"],["class","uppercase",3,"value",4,"ngFor","ngForOf"],["name","sortDir",1,"rounded-lg","mt-1",3,"ngModel","ngModelChange","change"],["value","1"],["value","-1"],["name","searchQuery","type","text","placeholder","search",1,"rounded-lg","flex-grow",3,"ngModel","keyup.enter","ngModelChange"],[1,"bg-transparent","border-2","nowrap","border-indigo-300","rounded-lg","p-2","px-4","hover:bg-indigo-400","hover:text-white",3,"click"],[1,"fas","fa-search"],["class","bg-transparent border-2 nowrap border-indigo-300 p-2 px-3 rounded-lg hover:bg-indigo-400 hover:text-white flex-grow",3,"routerLink",4,"ngIf"],[1,"bg-transparent","border-2","nowrap","border-indigo-300","p-2","px-3","rounded-lg","hover:bg-indigo-400","hover:text-white","flex-grow",3,"click"],[1,"fas","fa-sync-alt","mx-1"],["title","Success","type","success",3,"message",4,"ngIf"],["title","Error","type","danger",3,"message",4,"ngIf"],[1,"mt-3"],[1,"flex","justify-between"],[1,"bg-transparent","text-blue-500","p-2","border-2","border-gray-300","hover:bg-blue-100",3,"disabled","click"],[1,"fas","fa-chevron-left","mx-1"],["aria-label","Pagination",1,"relative","z-0","inline-flex","rounded-md","shadow-sm"],["class","bg-white cursor-pointer border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center py-2 px-4 border text-sm font-medium",3,"active","click",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-right","mx-1"],[1,"w-full","overflow-x-auto","mt-4"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-black"],["scope","col","class","py-3 px-2 text-center text-xs font-medium  text-white uppercase tracking-wider",4,"ngFor","ngForOf"],["scope","col",1,"relative","px-6","py-3"],[1,"sr-only"],["class","bg-white divide-y divide-gray-200",4,"ngIf"],[1,"uppercase",3,"value"],[1,"bg-transparent","border-2","nowrap","border-indigo-300","p-2","px-3","rounded-lg","hover:bg-indigo-400","hover:text-white","flex-grow",3,"routerLink"],[1,"fas","fa-plus","mx-1"],["title","Success","type","success",3,"message"],["title","Error","type","danger",3,"message"],[1,"bg-white","cursor-pointer","border-gray-300","text-gray-500","hover:bg-gray-50","relative","inline-flex","items-center","py-2","px-4","border","text-sm","font-medium",3,"click"],["scope","col",1,"py-3","px-2","text-center","text-xs","font-medium","text-white","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[3,"bg-gray-100",4,"ngFor","ngForOf"],["class","py-4 whitespace-nowrap text-center px-2 border-2 border-gray-200",4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap","text-right"],[1,"border-2","border-indigo-200","py-2","px-3","rounded-md","hover:bg-indigo-200","mx-1","text-xs",3,"routerLink","queryParams"],[1,"fas","fa-eye"],["class","border-2 border-gray-200 py-2 px-3 rounded-md hover:bg-gray-400 hover:text-white mx-1 text-xs",3,"routerLink","queryParams",4,"ngIf"],["class","border-2 border-red-200 py-2 px-3 rounded-md hover:bg-red-400 hover:text-white mx-1 text-xs",3,"click",4,"ngIf"],[1,"py-4","whitespace-nowrap","text-center","px-2","border-2","border-gray-200"],[3,"ngSwitch"],["class","h-10 w-10 rounded-full mx-auto ring-2 ring-gray-300","alt","",3,"src",4,"ngSwitchCase"],["class","p-2 px-3 inline-flex cursor-pointer text-sm leading-5 font-semibold rounded-full",3,"ngClass",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","text-sm text-gray-900",4,"ngSwitchDefault"],["alt","",1,"h-10","w-10","rounded-full","mx-auto","ring-2","ring-gray-300",3,"src"],[1,"p-2","px-3","inline-flex","cursor-pointer","text-sm","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"text-sm","text-gray-900"],[1,"border-2","border-gray-200","py-2","px-3","rounded-md","hover:bg-gray-400","hover:text-white","mx-1","text-xs",3,"routerLink","queryParams"],[1,"fas","fa-edit"],[1,"border-2","border-red-200","py-2","px-3","rounded-md","hover:bg-red-400","hover:text-white","mx-1","text-xs",3,"click"],[1,"fas","fa-trash-alt"]],template:function(e,t){1&e&&(a.Pb(0,"div",0),a.Pb(1,"div",1),a.Pb(2,"span",2),a.Lb(3,"i"),a.oc(4),a.Ob(),a.Lb(5,"hr"),a.Ob(),a.Pb(6,"div",3),a.Pb(7,"div",4),a.Pb(8,"span",5),a.oc(9,"Per page"),a.Ob(),a.Pb(10,"select",6),a.Wb("change",function(){return t.getData()})("ngModelChange",function(e){return t.limit=e}),a.Pb(11,"option",7),a.oc(12,"10"),a.Ob(),a.Pb(13,"option",8),a.oc(14,"20"),a.Ob(),a.Pb(15,"option",9),a.oc(16,"50"),a.Ob(),a.Pb(17,"option",8),a.oc(18,"100"),a.Ob(),a.Pb(19,"option",8),a.oc(20,"500"),a.Ob(),a.Ob(),a.Ob(),a.Pb(21,"div",10),a.Pb(22,"span",5),a.oc(23,"Sort by"),a.Ob(),a.Pb(24,"select",11),a.Wb("ngModelChange",function(e){return t.sortBy=e})("change",function(){return t.getData()}),a.nc(25,h,2,2,"option",12),a.Ob(),a.Pb(26,"select",13),a.Wb("ngModelChange",function(e){return t.sortDir=e})("change",function(){return t.getData()}),a.Pb(27,"option",14),a.oc(28,"ASC"),a.Ob(),a.Pb(29,"option",15),a.oc(30,"DESC"),a.Ob(),a.Ob(),a.Ob(),a.Pb(31,"div",10),a.Pb(32,"input",16),a.Wb("keyup.enter",function(){return t.getData()})("ngModelChange",function(e){return t.searchQuery=e}),a.Ob(),a.Pb(33,"button",17),a.Wb("click",function(){return t.getData()}),a.Lb(34,"i",18),a.Ob(),a.Ob(),a.Pb(35,"div",10),a.nc(36,f,3,4,"button",19),a.Pb(37,"button",20),a.Wb("click",function(){return t.getData()}),a.Lb(38,"i",21),a.oc(39," Refresh "),a.Ob(),a.Ob(),a.Ob(),a.Pb(40,"div",1),a.nc(41,m,1,1,"app-alert",22),a.nc(42,x,1,1,"app-alert",23),a.Ob(),a.Pb(43,"div",24),a.Pb(44,"div",25),a.Pb(45,"button",26),a.Wb("click",function(){return t.previousPage()}),a.Lb(46,"i",27),a.oc(47," Previous "),a.Ob(),a.Pb(48,"nav",28),a.nc(49,v,2,3,"a",29),a.Ob(),a.Pb(50,"button",26),a.Wb("click",function(){return t.nextPage()}),a.oc(51," Next "),a.Lb(52,"i",30),a.Ob(),a.Ob(),a.Pb(53,"div",31),a.Pb(54,"table",32),a.Pb(55,"thead",33),a.Pb(56,"tr"),a.nc(57,y,2,1,"th",34),a.Pb(58,"th",35),a.Pb(59,"span",36),a.oc(60,"Edit"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.nc(61,I,2,1,"tbody",37),a.Ob(),a.Ob(),a.Ob(),a.Ob()),2&e&&(a.zb(3),a.Bb(t.icon+" mx-2"),a.zb(1),a.qc("List of ",t.plurarName,""),a.zb(6),a.dc("ngModel",t.limit),a.zb(14),a.dc("ngModel",t.sortBy),a.zb(1),a.dc("ngForOf",t.sortableHeaders()),a.zb(1),a.dc("ngModel",t.sortDir),a.zb(6),a.dc("ngModel",t.searchQuery),a.zb(4),a.dc("ngIf",t.showCreateButton),a.zb(5),a.dc("ngIf",t.success),a.zb(1),a.dc("ngIf",t.error),a.zb(3),a.Cb("disabled",!t.canPrevious()),a.dc("disabled",!t.canPrevious()),a.zb(4),a.dc("ngForOf",t.pages),a.zb(1),a.Cb("disabled",!t.canNext()),a.dc("disabled",!t.canNext()),a.zb(7),a.dc("ngForOf",t.headers),a.zb(4),a.dc("ngIf",t.data&&t.data.length))},directives:[d.i,d.d,d.g,d.h,d.k,l.j,d.b,l.k,s.c,g.a,l.l,l.m,l.n,l.i],pipes:[l.d,u.a],styles:[".avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%}td[_ngcontent-%COMP%]{vertical-align:middle}.disabled[_ngcontent-%COMP%]{cursor:none}.disabled[_ngcontent-%COMP%]:hover{background-color:initial}.disabled[_ngcontent-%COMP%]{--tw-border-opacity:1;border-color:rgba(209,213,219,var(--tw-border-opacity));--tw-text-opacity:1;color:rgba(209,213,219,var(--tw-text-opacity))}.active[_ngcontent-%COMP%]{--tw-bg-opacity:1;background-color:rgba(238,242,255,var(--tw-bg-opacity));--tw-border-opacity:1;border-color:rgba(99,102,241,var(--tw-border-opacity));--tw-text-opacity:1;color:rgba(79,70,229,var(--tw-text-opacity))}"]}),e})()},ENac:function(e,t,n){"use strict";n.d(t,"a",function(){return B});var i=n("fXoL"),r=n("bl9C"),o=n("jhN1"),a=n("EnSQ"),c=n("tyNb"),s=n("ofXK"),b=n("3Pt+");function d(e,t){1&e&&(i.Pb(0,"div",2),i.Lb(1,"div",3),i.Ob())}function l(e,t){if(1&e&&(i.Pb(0,"div",9),i.Pb(1,"p",10),i.oc(2),i.Ob(),i.Ob()),2&e){const e=i.Yb(2);i.zb(2),i.pc(e.error)}}function g(e,t){if(1&e&&(i.Pb(0,"label",22),i.oc(1),i.Ob()),2&e){const e=i.Yb().$implicit;i.dc("for",e.name),i.zb(1),i.qc(" ",e.title," ")}}function u(e,t){if(1&e){const e=i.Qb();i.Pb(0,"section"),i.Pb(1,"div",23),i.Pb(2,"div",24),i.Pb(3,"div",25),i.Lb(4,"img",26),i.Ob(),i.Ob(),i.Pb(5,"label",27),i.oc(6," Change "),i.Ob(),i.Pb(7,"input",28),i.Wb("change",function(t){i.hc(e);const n=i.Yb().$implicit;return i.Yb(3).setImage(n,t)}),i.Ob(),i.Ob(),i.Ob()}if(2&e){const e=i.Yb().$implicit,t=i.Yb(3);i.zb(4),i.dc("src",t.imagesUrl[e.name]?t.imagesUrl[e.name]:"avatar"==e.type?"./../../../assets/user.jpeg":"./../../../assets/default-img.png",i.jc),i.zb(1),i.dc("for",e.name),i.zb(2),i.dc("name",e.name)("id",e.name)}}function h(e,t){if(1&e){const e=i.Qb();i.Pb(0,"section"),i.Pb(1,"select",29),i.Wb("ngModelChange",function(t){return i.hc(e),i.Yb().$implicit.value=t}),i.Pb(2,"option",30),i.oc(3),i.Ob(),i.Pb(4,"option",30),i.oc(5),i.Ob(),i.Ob(),i.Ob()}if(2&e){const e=i.Yb().$implicit,t=i.Yb(3);i.zb(1),i.Cb("error",t.errors&&t.errors[e.name]),i.dc("ngModel",e.value)("id",e.name)("name",e.name),i.zb(1),i.dc("value",!1),i.zb(1),i.pc(e.options[0]),i.zb(1),i.dc("value",!0),i.zb(1),i.pc(e.options[1])}}function p(e,t){if(1&e){const e=i.Qb();i.Pb(0,"section"),i.Pb(1,"label",31),i.Pb(2,"input",32),i.Wb("ngModelChange",function(t){return i.hc(e),i.Yb().$implicit.value=t}),i.Ob(),i.Pb(3,"span",33),i.oc(4),i.Ob(),i.Ob(),i.Ob()}if(2&e){const e=i.Yb().$implicit;i.zb(2),i.dc("ngModel",e.value)("name",e.name)("id",e.name),i.zb(2),i.pc(e.title)}}function f(e,t){if(1&e){const e=i.Qb();i.Pb(0,"span",37),i.oc(1),i.Pb(2,"span",38),i.Wb("click",function(){i.hc(e);const n=t.index,r=i.Yb(2).$implicit;return i.Yb(3).removeTag(r,n)}),i.Lb(3,"i",39),i.Ob(),i.Ob()}if(2&e){const e=t.$implicit;i.zb(1),i.qc(" ",e," ")}}function m(e,t){if(1&e&&(i.Pb(0,"option",30),i.oc(1),i.Ob()),2&e){const e=t.$implicit;i.dc("value",e),i.zb(1),i.qc(" ",e," ")}}function x(e,t){if(1&e){const e=i.Qb();i.Pb(0,"section"),i.nc(1,f,4,1,"span",34),i.Pb(2,"select",35),i.Wb("change",function(t){i.hc(e);const n=i.Yb().$implicit;return i.Yb(3).addTag(n,t)}),i.nc(3,m,2,2,"option",36),i.Ob(),i.Ob()}if(2&e){const e=i.Yb().$implicit,t=i.Yb(3);i.zb(1),i.dc("ngForOf",e.value),i.zb(1),i.Cb("error",t.errors&&t.errors[e.name]),i.dc("id",e.name)("name",e.name),i.zb(1),i.dc("ngForOf",e.options)}}function v(e,t){if(1&e&&(i.Pb(0,"option",30),i.oc(1),i.Ob()),2&e){const e=t.$implicit;i.dc("value",e),i.zb(1),i.qc(" ",e," ")}}function y(e,t){if(1&e){const e=i.Qb();i.Pb(0,"section"),i.Pb(1,"select",40),i.Wb("change",function(){i.hc(e);const t=i.Yb().$implicit;return i.Yb(3).fieldChanged(t.name,t.value)})("ngModelChange",function(t){return i.hc(e),i.Yb().$implicit.value=t}),i.nc(2,v,2,2,"option",36),i.Ob(),i.Ob()}if(2&e){const e=i.Yb().$implicit,t=i.Yb(3);i.zb(1),i.Cb("error",t.errors&&t.errors[e.name]),i.dc("ngModel",e.value)("id",e.name)("name",e.name),i.zb(1),i.dc("ngForOf",e.options)}}function w(e,t){if(1&e){const e=i.Qb();i.Pb(0,"textarea",42),i.Wb("ngModelChange",function(t){return i.hc(e),i.Yb(2).$implicit.value=t}),i.Ob()}if(2&e){const e=i.Yb(2).$implicit,t=i.Yb(3);i.Cb("error",t.errors&&t.errors[e.name]),i.dc("id",e.name)("name",e.name)("ngModel",e.value)("placeholder",e.title)}}function P(e,t){if(1&e&&(i.Pb(0,"section"),i.nc(1,w,1,6,"textarea",41),i.Ob()),2&e){const e=i.Yb().$implicit;i.zb(1),i.dc("ngIf",!e.hidden)}}function O(e,t){if(1&e){const e=i.Qb();i.Pb(0,"button",48),i.Wb("click",function(t){i.hc(e);const n=i.Yb(3).$implicit;return i.Yb(3).addElemToList(n,t)}),i.Lb(1,"i",49),i.Ob()}}function C(e,t){if(1&e){const e=i.Qb();i.Pb(0,"button",50),i.Wb("click",function(){i.hc(e);const t=i.Yb().index,n=i.Yb(2).$implicit;return i.Yb(3).removeElemFromList(n,t)}),i.Lb(1,"i",51),i.Ob()}}function k(e,t){if(1&e){const e=i.Qb();i.Pb(0,"div",5),i.Pb(1,"div",44),i.Pb(2,"input",45),i.Wb("ngModelChange",function(n){i.hc(e);const r=t.index;return i.Yb(2).$implicit.value[r]=n}),i.Ob(),i.nc(3,O,2,0,"button",46),i.nc(4,C,2,0,"button",47),i.Ob(),i.Ob()}if(2&e){const e=t.index,n=i.Yb(2).$implicit;i.zb(2),i.dc("ngModel",n.value[e])("id",n.name+"-"+e)("name",n.name+"-"+e),i.zb(1),i.dc("ngIf",e==n.value.length-1),i.zb(1),i.dc("ngIf",0!=e||n.value.length>1)}}function z(e,t){if(1&e&&(i.Pb(0,"div"),i.nc(1,k,5,5,"div",43),i.Ob()),2&e){const e=i.Yb().$implicit,t=i.Yb(3);i.zb(1),i.dc("ngForOf",e.value)("ngForTrackBy",t.trackByIndex)}}function L(e,t){if(1&e){const e=i.Qb();i.Pb(0,"input",53),i.Wb("ngModelChange",function(t){return i.hc(e),i.Yb(2).$implicit.value=t}),i.Ob()}if(2&e){const e=i.Yb(2).$implicit,t=i.Yb(3);i.Cb("error",t.errors&&t.errors[e.name]),i.dc("id",e.name)("name",e.name)("ngModel",e.value)("type",e.type)("placeholder",e.title)}}function Y(e,t){if(1&e&&(i.Pb(0,"section"),i.nc(1,L,1,7,"input",52),i.Ob()),2&e){const e=i.Yb().$implicit;i.zb(1),i.dc("ngIf",!e.hidden)}}function M(e,t){if(1&e&&(i.Pb(0,"span",55),i.oc(1),i.Ob()),2&e){const e=t.$implicit;i.zb(1),i.pc(e)}}function I(e,t){if(1&e&&(i.Pb(0,"span"),i.nc(1,M,2,1,"span",54),i.Ob()),2&e){const e=i.Yb().$implicit,t=i.Yb(3);i.zb(1),i.dc("ngForOf",t.errors[e.name])}}const $=function(e){return[e]};function S(e,t){if(1&e&&(i.Pb(0,"div",17),i.nc(1,g,2,2,"label",18),i.Pb(2,"section",19),i.nc(3,u,8,4,"section",20),i.nc(4,h,6,9,"section",20),i.nc(5,p,5,4,"section",20),i.nc(6,x,4,6,"section",20),i.nc(7,y,3,6,"section",20),i.nc(8,P,2,1,"section",20),i.nc(9,z,2,2,"div",20),i.nc(10,Y,2,1,"section",21),i.Ob(),i.nc(11,I,2,1,"span",16),i.Ob()),2&e){const e=t.$implicit,n=i.Yb(3);i.Bb(i.ec(12,$,e.width?"w-"+e.width:"w-full")),i.zb(1),i.dc("ngIf",!e.hidden&&"checkbox"!=e.type),i.zb(1),i.dc("ngSwitch",e.type),i.zb(1),i.dc("ngSwitchCase","image"==e.type||"avatar"==e.type?e.type:""),i.zb(1),i.dc("ngSwitchCase","boolean"),i.zb(1),i.dc("ngSwitchCase","checkbox"),i.zb(1),i.dc("ngSwitchCase","select-tags"),i.zb(1),i.dc("ngSwitchCase","select"),i.zb(1),i.dc("ngSwitchCase","textarea"),i.zb(1),i.dc("ngSwitchCase","input-list"),i.zb(2),i.dc("ngIf",n.errors&&n.errors[e.name])}}function F(e,t){1&e&&(i.Pb(0,"span"),i.Lb(1,"i",56),i.Ob())}function D(e,t){1&e&&(i.Pb(0,"span"),i.oc(1,"Save"),i.Ob())}function R(e,t){if(1&e){const e=i.Qb();i.Pb(0,"form",11,12),i.Wb("ngSubmit",function(){i.hc(e);const t=i.gc(1),n=i.Yb(2);return"edit"==n.type?n.updateUser(t.value):n.storeUser(t.value)}),i.Pb(2,"div",13),i.nc(3,S,12,14,"div",14),i.Pb(4,"button",15),i.nc(5,F,2,0,"span",16),i.nc(6,D,2,0,"span",16),i.Ob(),i.Ob(),i.Ob()}if(2&e){const e=i.Yb(2);i.zb(3),i.dc("ngForOf",e.headers),i.zb(2),i.dc("ngIf",e.saveLoading),i.zb(1),i.dc("ngIf",!e.saveLoading)}}function U(e,t){if(1&e&&(i.Pb(0,"div",4),i.Pb(1,"div",5),i.Pb(2,"span",6),i.Lb(3,"i"),i.oc(4),i.Ob(),i.Lb(5,"hr"),i.Ob(),i.Lb(6,"hr"),i.nc(7,l,3,1,"div",7),i.nc(8,R,7,3,"form",8),i.Ob()),2&e){const e=i.Yb();i.zb(3),i.Bb(e.icon+" mx-2"),i.zb(1),i.rc("",e.type," ",e.singleName,""),i.zb(3),i.dc("ngIf",e.error),i.zb(1),i.dc("ngIf",!e.loading&&"edit"==e.type==!!e.data&&e.headers&&e.headers.length)}}let B=(()=>{class e{constructor(e,t,n,r){this.sanitizer=e,this.dataService=t,this.router=n,this.route=r,this.headers=void 0,this.icon="",this.headersChanged=new i.n,this.onChange=new i.n,this.imagesUrl={},this.loading=!0,this.saveLoading=!1}ngOnInit(){}ngOnChanges(e){!this.type&&this.headers&&this.headers.length&&this.getFormType()}getFormType(){this.route.paramMap.subscribe(e=>{this.type=e.get("type"),"edit"==this.type?this.route.queryParamMap.subscribe(e=>{this.dataId=e.get("id"),this.getData()}):this.loading=!1})}getData(){const e=this.retrieveURL.replace(/:id/g,this.dataId);this.error=void 0,this.dataService.sendGetRequest(e,{}).subscribe(e=>{this.loading=!1,this.data=e.data,this.headers.forEach(e=>{"avatar"!=e.type&&"image"!=e.type||(this.data[e.name]=r.a.DOMAIN_URL+this.data[e.name])}),console.log(this.data),this.setHeaderValues()},e=>{e=e.error,this.loading=!1,this.error=e})}setHeaderValues(){this.headersChanged.emit(this.headers.map(e=>{if(this.fieldChanged(e.name,this.data[e.name]),"avatar"==e.type||"image"==e.type)return this.imagesUrl[e.name]=this.data[e.name],e;let t=this.data[e.name];return Object.assign(Object.assign({},e),{value:t})}))}fieldChanged(e,t){this.onChange.emit({name:e,value:t})}addTag(e,t){const n=t.target.value;e.value.includes(n)||e.value.push(n)}removeTag(e,t){e.value.splice(t,1)}setImage(e,t){const n=t.target.files[0];this.imagesUrl[e.name]=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(n)),e.value=n}getFormData(e){const t=new FormData;return this.headers.forEach(e=>{switch(e.type){case"image":case"avatar":e.value&&t.append(e.name,e.value,"image");break;case"select-tags":t.append(e.name,e.value);break;case"input-list":{const n=e.value.filter(e=>e.length);t.append(e.name,JSON.stringify(n));break}default:t.append(e.name,e.value)}}),t}beforeRequest(){this.error=void 0,this.errors=void 0,this.saveLoading=!0}handleResponse(e){this.router.navigate([this.redirectLink],{queryParams:{flashMessage:e.message}}),this.saveLoading=!1}handleError(e){this.saveLoading=!1,(e=e.error).errors?(this.errors=e.errors,this.error="Invalid data"):this.error=e;const t=setInterval(()=>{document.body.scrollTop?document.body.scrollTop=--document.documentElement.scrollTop:clearInterval(t)},10)}updateUser(e){this.beforeRequest();const t=this.updateURL.replace(/:id/g,this.dataId);this.dataService.sendPutRequest(t,this.getFormData(e)).subscribe(e=>{this.handleResponse(e)},e=>{this.handleError(e)})}trackByIndex(e,t){return e}storeUser(e){this.beforeRequest(),this.dataService.sendPostRequest(this.storeURL,this.getFormData(e)).subscribe(e=>{this.handleResponse(e)},e=>{this.handleError(e)})}addElemToList(e,t){e.value.push("")}removeElemFromList(e,t){e.value.splice(t,1)}}return e.\u0275fac=function(t){return new(t||e)(i.Kb(o.b),i.Kb(a.a),i.Kb(c.b),i.Kb(c.a))},e.\u0275cmp=i.Eb({type:e,selectors:[["app-form"]],inputs:{singleName:"singleName",plurarName:"plurarName",retrieveURL:"retrieveURL",storeURL:"storeURL",updateURL:"updateURL",redirectLink:"redirectLink",headers:"headers",icon:"icon"},outputs:{headersChanged:"headersChanged",onChange:"onChange"},features:[i.xb],decls:2,vars:2,consts:[["class","w-full h-full flex justify-center items-center",4,"ngIf"],["class","mx-3",4,"ngIf"],[1,"w-full","h-full","flex","justify-center","items-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-4","border-b-4","border-blue-500"],[1,"mx-3"],[1,"my-3"],[1,"text-3xl","uppercase","my-2"],["class","bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mx-4 my-4",4,"ngIf"],["class","w-full",3,"ngSubmit",4,"ngIf"],[1,"bg-red-100","border-l-4","border-red-500","text-red-700","p-4","mx-4","my-4"],[1,"font-bold"],[1,"w-full",3,"ngSubmit"],["form","ngForm"],[1,"flex","flex-wrap","mb-6","w-full"],["class","px-3 my-2",3,"class",4,"ngFor","ngForOf"],["type","submit",1,"bg-indigo-400","p-2","w-full","my-3","text-white","mx-2"],[4,"ngIf"],[1,"px-3","my-2"],["class","block uppercase tracking-wide text-gray-700 text-sm font-bold mb-2",3,"for",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"block","uppercase","tracking-wide","text-gray-700","text-sm","font-bold","mb-2",3,"for"],[1,"mt-1","flex","items-center","justify-center"],[1,"flex","items-center","justify-center"],[1,"w-32","h-32","flex","items-center","rounded-full","ring-2","ring-gray-300","overflow-hidden"],["alt","",1,"w-full","min-h-full","rounded-full",3,"src"],[1,"ml-5","cursor-pointer","bg-white","block","py-2","px-3","border","border-gray-300","rounded-md","shadow-sm","text-sm","leading-4","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"for"],["type","file","ngModel","","hidden","",3,"name","id","change"],[1,"appearance-none","block","w-full","bg-gray-100","text-gray-600","rounded","py-3","px-4","leading-tight","focus:outline-none","focus:bg-white",3,"ngModel","id","name","ngModelChange"],[3,"value"],[1,"flex","items-center"],["type","checkbox",1,"form-checkbox",3,"ngModel","name","id","ngModelChange"],[1,"ml-2"],["class","mr-1 mb-2 inline-block border-2 border-indigo-400 p-2 rounded-lg",4,"ngFor","ngForOf"],[1,"appearance-none","block","w-full","bg-gray-100","text-gray-600","rounded","py-3","px-4","leading-tight","focus:outline-none","focus:bg-white",3,"id","name","change"],[3,"value",4,"ngFor","ngForOf"],[1,"mr-1","mb-2","inline-block","border-2","border-indigo-400","p-2","rounded-lg"],[1,"inline-block","cursor-pointer","text-indigo-200","mx-2",3,"click"],[1,"fas","fa-times"],[1,"appearance-none","block","w-full","bg-gray-100","text-gray-600","rounded","py-3","px-4","mb-3","leading-tight","focus:outline-none","focus:bg-white",3,"ngModel","id","name","change","ngModelChange"],["rows","8","class","appearance-none block w-full bg-gray-100 text-gray-600 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white",3,"id","name","ngModel","placeholder","error","ngModelChange",4,"ngIf"],["rows","8",1,"appearance-none","block","w-full","bg-gray-100","text-gray-600","rounded","py-3","px-4","leading-tight","focus:outline-none","focus:bg-white",3,"id","name","ngModel","placeholder","ngModelChange"],["class","my-3",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex"],["type","text",1,"appearance-none","block","w-full","bg-gray-100","text-gray-600","rounded","py-3","px-4","leading-tight","focus:outline-none","focus:bg-white",3,"ngModel","id","name","ngModelChange"],["type","button","class","border-2 border-indigo-300 text-indigo-300 rounded-lg px-4 ml-2 hover:bg-indigo-300 hover:text-white",3,"click",4,"ngIf"],["type","button","class","border-2 border-red-300 text-red-300 rounded-lg px-4 ml-2 hover:bg-red-300 hover:text-white",3,"click",4,"ngIf"],["type","button",1,"border-2","border-indigo-300","text-indigo-300","rounded-lg","px-4","ml-2","hover:bg-indigo-300","hover:text-white",3,"click"],[1,"fas","fa-plus"],["type","button",1,"border-2","border-red-300","text-red-300","rounded-lg","px-4","ml-2","hover:bg-red-300","hover:text-white",3,"click"],[1,"fas","fa-minus"],["class","appearance-none block w-full bg-gray-100 text-gray-600 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white",3,"id","name","ngModel","type","placeholder","error","ngModelChange",4,"ngIf"],[1,"appearance-none","block","w-full","bg-gray-100","text-gray-600","rounded","py-3","px-4","leading-tight","focus:outline-none","focus:bg-white",3,"id","name","ngModel","type","placeholder","ngModelChange"],["class","text-red-500 text-sm italic",4,"ngFor","ngForOf"],[1,"text-red-500","text-sm","italic"],[1,"fas","fa-circle-notch","fa-spin"]],template:function(e,t){1&e&&(i.nc(0,d,2,0,"div",0),i.nc(1,U,9,6,"div",1)),2&e&&(i.dc("ngIf",t.loading),i.zb(1),i.dc("ngIf",!t.loading))},directives:[s.k,b.j,b.e,b.f,s.j,s.l,s.m,s.n,b.b,b.d,b.g,b.i,b.h,b.k,b.a],styles:[".error[_ngcontent-%COMP%]{--tw-bg-opacity:1;background-color:rgba(254,226,226,var(--tw-bg-opacity));--tw-border-opacity:1;border-color:rgba(248,113,113,var(--tw-border-opacity));border-width:2px}"]}),e})()}}]);